{% extends "base.html" %}
{% block content %}
<h1>ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§</h1>

<!-- æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚ã‚‹ã¨ãã«ç·‘æ–‡å­—ã§è¡¨ç¤º -->
{% if error %}
<p style="color: red;">{{ error }}</p>
{% endif %}

<!-- ğŸ”” ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
{% with messages = get_flashed_messages() %}
{% if messages %}
<ul class="flash-messages">
    {% for message in messages %}
    <li style="color: green;">{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}
{% endwith %}


<!-- æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒœã‚¿ãƒ³ -->
<p>
    <a href="{{ url_for('add_user') }}" class="class_a_register">
        <button type="button">ï¼‹ æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²</button>
    </a>
</p>


<!-- æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  -->
<form method="POST" action="{{ url_for('manage_users') }}">
    <label for="keyword">ãƒ¦ãƒ¼ã‚¶ãƒ¼åï¼š</label>
    <input type="text" name="keyword" id="keyword" placeholder="æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰" value="{{ keyword or '' }}">

    <label for="is_admin">æ¨©é™ï¼š</label>
    <select name="is_admin" id="is_admin">
        <option value="">ã™ã¹ã¦</option>
        <option value="1" {% if selected_admin=='1' %}selected{% endif %}>ç®¡ç†è€…ã®ã¿</option>
        <option value="0" {% if selected_admin=='0' %}selected{% endif %}>ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿</option>
    </select>

    <label for="match_type">ä¸€è‡´æ¡ä»¶ï¼š</label>
    <select name="match_type" id="match_type">
        <option value="partial" {% if match_type=='partial' %}selected{% endif %}>éƒ¨åˆ†ä¸€è‡´</option>
        <option value="exact" {% if match_type=='exact' %}selected{% endif %}>å®Œå…¨ä¸€è‡´</option>
    </select>

    <button type="submit">ğŸ” æ¤œç´¢</button>
</form>
<br>


<table border="1" cellpadding="10">
    <thead>
        <tr>
            <th>ID</th>
            <th>ãƒ¦ãƒ¼ã‚¶ãƒ¼å</th>
            <th>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆãƒãƒƒã‚·ãƒ¥ï¼‰</th>
            <th>æ¨©é™</th>
            <th>æ“ä½œ</th>
        </tr>
    </thead>
    <tbody>
        {% for user in users %}
        <tr>
            <td>{{ user.id }}</td>
            <td>{{ user.username }}</td>
            <td>{{ user.password }}</td>
            <td>{{ "âœ…" if user.is_admin else "âŒ" }}</td>
            <td>
                <div class="table-actions">
                    <!-- ç·¨é›†ãƒœã‚¿ãƒ³ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼IDä»˜ãã§ãƒªãƒ³ã‚¯ -->
                    <form action="{{ url_for('edit_user', user_id=user.id) }}" method="get">
                        <button type="submit">ç·¨é›†</button>
                    </form>
                    <!-- å‰Šé™¤ãƒœã‚¿ãƒ³ -->
                    <form action="{{ url_for('delete_user', user_id=user.id) }}" method="post" style="display:inline;"
                        onsubmit="return confirm('ã“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ');">
                        <button type="submit">å‰Šé™¤</button>
                    </form>
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<br>
<a href="{{ url_for('admin') }}">â† ç®¡ç†è€…ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a>
{% endblock %}