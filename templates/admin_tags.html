{% extends "base.html" %}

{% block header %}
<h1>ã‚¿ã‚°ç®¡ç†ãƒšãƒ¼ã‚¸</h1>
{% endblock %}

{% block content %}

<!-- ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¡¨ç¤º -->
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
{% for category, message in messages %}
<div class="flash {{ category }}">{{ message }}</div>
{% endfor %}
{% endif %}
{% endwith %}

<!-- æ–°è¦è¿½åŠ ãƒœã‚¿ãƒ³ -->
<a href="{{ url_for('add_tag') }}" class="class_a_register">
    <button>ï¼‹ æ–°ã—ã„ã‚¿ã‚°ã‚’è¿½åŠ </button>
</a>

<br><br>

<!-- ã‚¿ã‚°æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  -->
<form method="POST" action="{{ url_for('manage_tags') }}">
    <label for="keyword">ã‚¿ã‚°åï¼š</label>
    <input type="text" name="keyword" id="keyword" placeholder="æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰" value="{{ keyword or '' }}">

    <label for="match_type">ä¸€è‡´æ¡ä»¶ï¼š</label>
    <select name="match_type" id="match_type">
        <option value="partial" {% if match_type=='partial' %}selected{% endif %}>éƒ¨åˆ†ä¸€è‡´</option>
        <option value="exact" {% if match_type=='exact' %}selected{% endif %}>å®Œå…¨ä¸€è‡´</option>
    </select>

    <button type="submit">ğŸ” æ¤œç´¢</button>
</form>

<br>


<!-- ã‚¿ã‚°ä¸€è¦§è¡¨ç¤º -->
<table border="1" cellpadding="8">
    <tr>
        <th>ID</th>
        <th>ã‚¿ã‚°å</th>
        <th>æ“ä½œ</th>
    </tr>
    {% for tag in tags %}
    <tr>
        <td>{{ tag.id }}</td>
        <td>{{ tag.name }}</td>
        <td>
            <div class="table-actions">
                <!-- ç·¨é›†ãƒœã‚¿ãƒ³ -->
                <form action="{{ url_for('edit_tag', tag_id=tag.id) }}" method="get" style="display:inline;">
                    <button type="submit">ç·¨é›†</button>
                </form>

                <!-- å‰Šé™¤ãƒœã‚¿ãƒ³ -->
                <form action="{{ url_for('delete_tag', tag_id=tag.id) }}" method="post" style="display:inline;"
                    onsubmit="return confirm('ã“ã®ã‚¿ã‚°ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ');">
                    <button type="submit">å‰Šé™¤</button>
                </form>
            </div>
        </td>
    </tr>
    {% endfor %}
</table>

<br>
<a href="{{ url_for('admin') }}">â† ç®¡ç†è€…ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a>

{% endblock %}